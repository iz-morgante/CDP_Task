coal_gas_electricity <- filter(cdp_data, Source == "Coal" | Source == "Natural gas")
# Sum country
coal_gas_country <- filter(coal_gas_electricity, Country != "World") %>%
group_by(Year, Source) %>%
summarise(ElectricityGeneration_GWh = sum(ElectricityGeneration_GWh))
coal_gas_global <- filter(coal_gas_electricity, Country == "World") %>%
sort_by(Year, Source)
coal_gas_electricity <- filter(cdp_data, Source == "Coal" | Source == "Natural gas")
# Sum country
coal_gas_country <- filter(coal_gas_electricity, Country != "World") %>%
group_by(Year, Source) %>%
summarise(ElectricityGeneration_GWh = sum(ElectricityGeneration_GWh))
coal_gas_global <- filter(coal_gas_electricity, Country == "World")
coal_gas_test <- full_join(coal_gas_country, coal_gas_global, by = c('Year','Source'))
View(coal_gas_test)
View(coal_gas_test)
coal_gas_electricity <- filter(cdp_data, Source == "Coal" | Source == "Natural gas")
# Sum country
coal_gas_country <- filter(coal_gas_electricity, Country != "World") %>%
group_by(Year, Source) %>%
summarise(ElectricityGeneration_GWh_TopFive = sum(ElectricityGeneration_GWh))
coal_gas_global <- filter(coal_gas_electricity, Country == "World")
coal_gas_test <- full_join(coal_gas_country, coal_gas_global, by = c('Year','Source'))
coal_gas_electricity <- filter(cdp_data, Source == "Coal" | Source == "Natural gas")
# Sum country
coal_gas_country <- filter(coal_gas_electricity, Country != "World") %>%
group_by(Year, Source) %>%
summarise(ElectricityGeneration_GWh_TopFive = sum(ElectricityGeneration_GWh))
coal_gas_global <- filter(coal_gas_electricity, Country == "World")
coal_gas_test <- full_join(coal_gas_country, coal_gas_global, by = c('Year','Source'))
View(coal_gas_test)
View(coal_gas_test)
# Sum country
coal_gas_country <- filter(cdp_data, Source == "Coal" & Country != "World" | Source == "Natural gas" & Country != "World") %>%
group_by(Year, Source) %>%
summarise(ElectricityGeneration_GWh_TopFive = sum(ElectricityGeneration_GWh))
View(coal_gas_country)
coal_gas_electricity <- filter(cdp_data, Source == "Coal" | Source == "Natural gas")
# Sum country
coal_gas_country <- filter(coal_gas_electricity, Country != "World") %>%
group_by(Year, Source) %>%
summarise(ElectricityGeneration_GWh_TopFive = sum(ElectricityGeneration_GWh))
View(coal_gas_country)
View(coal_gas_country)
# Sum country
coal_gas_country <- filter(coal_gas_electricity, Source == "Coal" & Country != "World" | Source == "Natural gas" & Country != "World") %>%
group_by(Year, Source) %>%
summarise(ElectricityGeneration_GWh_TopFive = sum(ElectricityGeneration_GWh))
# Sum country
coal_gas_country <- filter(cdp_data, Source == "Coal" & Country != "World" | Source == "Natural gas" & Country != "World") %>%
group_by(Year, Source) %>%
summarise(ElectricityGeneration_GWh_TopFive = sum(ElectricityGeneration_GWh))
# Sum country
coal_gas_country <- filter(cdp_data, Source == "Coal" & Country != "World" | Source == "Natural gas" & Country != "World") %>%
group_by(Year, Source) %>%
summarise(ElectricityGeneration_GWh_TopFive = sum(ElectricityGeneration_GWh))
coal_gas_global <- filter(cdp_data, Source == "Coal" & Country == "World" | Source == "Natural gas" & Country == "World")
coal_gas <- full_join(coal_gas_country, coal_gas_global, by = c('Year','Source'))
View(coal_gas)
View(coal_gas)
View(coal_gas_test)
View(coal_gas_test)
coal_gas <- full_join(coal_gas_country, coal_gas_global, by = c('Year','Source')) %>%
group_by(Year, Source) %>%
mutate(
Percent = ElectricityGeneration_GWh_TopFive / ElectricityGeneration_GWh
)
View(coal_gas)
View(coal_gas)
# Combine get totals generation
coal_gas_electricity <- filter(cdp_data, Source == "Coal" | Source == "Natural gas") %>%
group_by(Country, Year, Source) %>%
summarise(ElectricityGeneration_GWh = sum(ElectricityGeneration_GWh))
coal_gas_country <- filter(coal_gas_electricity, Country != "World") %>%
group_by(Year, Source) %>%
summarise(ElectricityGeneration_GWh = sum(ElectricityGeneration_GWh))
coal_gas_country <- filter(coal_gas_country, Year < 2017)
coal_gas_global <- filter(coal_gas_electricity, Country == "World" & Year < 2017)
coal_gas_country$Percent <- coal_gas_country$ElectricityGeneration_GWh / coal_gas_global$ElectricityGeneration_GWh
View(coal_gas_country)
View(coal_gas_country)
# Sum country
coal_gas_country <- filter(cdp_data, Source == "Coal" & Country != "World" | Source == "Natural gas" & Country != "World") %>%
group_by(Year, Source) %>%
summarise(ElectricityGeneration_GWh_TopFive = sum(ElectricityGeneration_GWh))
coal_gas_global <- filter(cdp_data, Source == "Coal" & Country == "World" | Source == "Natural gas" & Country == "World")
coal_gas <- full_join(coal_gas_country, coal_gas_global, by = c('Year','Source')) %>%
group_by(Year, Source) %>%
mutate(
Percent = ElectricityGeneration_GWh_TopFive / ElectricityGeneration_GWh
)
View(coal_gas)
View(coal_gas)
source('~/Documents/CDP_Task/Code/cdp_task_code.R')
coal_gas_global <- select(coal_gas_global, -c(Country, Unit)
# Global coal and gas
coal_gas_global <- filter(cdp_data, Source == "Coal" & Country == "World" | Source == "Natural gas" & Country == "World")
# Global coal and gas
coal_gas_global <- filter(cdp_data, Source == "Coal" & Country == "World" | Source == "Natural gas" & Country == "World")
View(coal_gas_global)
View(coal_gas_global)
View(coal_gas)
View(coal_gas)
knitr::opts_chunk$set(echo = TRUE)
setwd("~/Documents/CDP_Task/Code/") # set working directory
rm(list=ls(all=TRUE))
graphics.off()
require(ggplot2)
require(dplyr)
cdp_data <- read.csv(file = "../Data/Electricity generation by source - top 5.csv", stringsAsFactors = TRUE)
# Change column name to avoid dots
names(cdp_data)[names(cdp_data) == "Electricity.Generation..GWh."] <- "ElectricityGeneration_GWh"
# Sum electricity generation by coal and gas for all countries
coal_gas_country <- filter(cdp_data, Source == "Coal" & Country != "World" | Source == "Natural gas" & Country != "World") %>%
group_by(Year, Source) %>%
summarise(ElectricityGeneration_GWh_TopFive = sum(ElectricityGeneration_GWh))
# Global coal and gas
coal_gas_global <- filter(cdp_data, Source == "Coal" & Country == "World" | Source == "Natural gas" & Country == "World")
coal_gas_global <- select(coal_gas_global, -c(Country, Units))
View(coal_gas_global)
View(coal_gas_global)
rename(coal_gas_global, ElectricityGeneration_GWh = ElectricityGeneration_GWh_Global)
rename(coal_gas_global, ElectricityGeneration_GWh_Global = ElectricityGeneration_GWh)
# Divide country generation by gloabl value to get proportion and join into single df
coal_gas <- full_join(coal_gas_country, coal_gas_global, by = c('Year','Source')) %>%
group_by(Year, Source) %>%
mutate(
Percent = ElectricityGeneration_GWh_TopFive / ElectricityGeneration_GWh_Global
)
View(coal_gas_global)
View(coal_gas_global)
rename(coal_gas_global, ElectricityGeneration_GWh_Global = ElectricityGeneration_GWh)
rename(coal_gas, ElectricityGeneration_GWh_Global = ElectricityGeneration_GWh)
# Divide country generation by gloabl value to get proportion and join into single df
coal_gas <- full_join(coal_gas_country, coal_gas_global, by = c('Year','Source')) %>%
group_by(Year, Source) %>%
mutate(
Percent = ElectricityGeneration_GWh_TopFive / ElectricityGeneration_GWh
)
rename(coal_gas, ElectricityGeneration_GWh_Global = ElectricityGeneration_GWh)
View(coal_gas)
View(coal_gas)
source('~/Documents/CDP_Task/Code/cdp_task_code.R')
## View lifecycle GHG data
head(lifecycle_GHG_emissions)
str(lifecycle_GHG_emissions)
View(cdp_data)
View(cdp_data)
## Convert electricity values from GWh to kWh
emissions <- cpd_data %>%
mutate(
ElectricityGeneration_kWh = ElectricityGeneration_GWh * 1e6
)
## Convert electricity values from GWh to kWh
emissions <- cdp_data %>%
mutate(
ElectricityGeneration_kWh = ElectricityGeneration_GWh * 1e6
)
View(emissions)
View(emissions)
View(lifecycle_GHG_emissions)
View(lifecycle_GHG_emissions)
rename(lifecycle_GHG_emissions, Source = Technology)
## View lifecycle GHG data
head(lifecycle_GHG_emissions)
lifecycle_GHG_emissions <- rename(lifecycle_GHG_emissions, Source = Technology)
## Convert electricity values from GWh to kWh
emissions <- full_join(cdp_data, lifecycle_GHG_emissions, by = c('Source')) %>%
mutate(
ElectricityGeneration_kWh = ElectricityGeneration_GWh * 1e6
)
View(emissions)
View(emissions)
lifecycle_GHG_emissions <- rename(lifecycle_GHG_emissions, Source = Technology, GHG_EF = `50th percentile  (g CO2-eq/kWhe)`)
lifecycle_GHG_emissions <- url %>%
read_html() %>%
html_nodes(xpath=table_XPath) %>%
html_table()
lifecycle_GHG_emissions <-lifecycle_GHG_emissions[[1]]
lifecycle_GHG_emissions <- rename(lifecycle_GHG_emissions, Source = Technology, GHG_EF = `50th percentile  (g CO2-eq/kWhe)`)
## Add GHG values to cdp data to find emissions
emissions <- full_join(cdp_data, lifecycle_GHG_emissions, by = c('Source')) %>%
mutate(
ElectricityGeneration_kWh = ElectricityGeneration_GWh * 1e6 #Convert from GWh to kWh
GHG_Emissions = ElectricityGeneration_kWh * GHG_EF
)
## Add GHG values to cdp data to find emissions
emissions <- full_join(cdp_data, lifecycle_GHG_emissions, by = c('Source')) %>%
mutate(
ElectricityGeneration_kWh = ElectricityGeneration_GWh * 1e6, #Convert from GWh to kWh
GHG_Emissions = ElectricityGeneration_kWh * GHG_EF
)
View(emissions)
View(emissions)
total_emissions <- emissions %>%
group_by(Year, Country) %>%
summarise(Total_GHG_Emissions = sum(GHG_Emissions))
View(total_emissions)
View(total_emissions)
total_emissions <- emissions %>%
group_by(Year, Country) %>%
summarise(Total_GHG_Emissions = sum(GHG_Emissions, na.rm = TRUE))
View(total_emissions)
View(total_emissions)
## Add GHG values to cdp data to find emissions
emissions <- full_join(cdp_data, lifecycle_GHG_emissions, by = c('Source')) %>% na.omit() %>%
mutate(
ElectricityGeneration_kWh = ElectricityGeneration_GWh * 1e6, #Convert from GWh to kWh
GHG_Emissions = ElectricityGeneration_kWh * GHG_EF
)
total_emissions <- emissions %>%
group_by(Year, Country) %>%
summarise(Total_GHG_Emissions = sum(GHG_Emissions, na.rm = TRUE))
View(total_emissions)
View(total_emissions)
## Extract data ‘Lifecycle greenhouse gas emissions by electricity source’ table
url <- "https://en.wikipedia.org/wiki/Emission_intensity"
table_XPath <- '//*[@id="mw-content-text"]/div[1]/table[1]'
lifecycle_GHG_emissions <- url %>%
read_html() %>%
html_nodes(xpath=table_XPath) %>%
html_table()
lifecycle_GHG_emissions <-lifecycle_GHG_emissions[[1]]
lifecycle_GHG_emissions <- rename(lifecycle_GHG_emissions, Source = Technology, GHG_EF = `50th percentile  (g CO2-eq/kWhe)`)
## View lifecycle GHG data
head(lifecycle_GHG_emissions)
str(lifecycle_GHG_emissions)
## Add GHG values to cdp data to find emissions
emissions <- full_join(cdp_data, lifecycle_GHG_emissions, by = c('Source')) %>% na.omit() %>% # Nas will be produced from countries not generating electricity by a certain source one year and any additional Sources that were included in the wiki data (i.e. didn't match).
mutate(
ElectricityGeneration_kWh = ElectricityGeneration_GWh * 1e6, #Convert from GWh to kWh
GHG_Emissions = ElectricityGeneration_kWh * GHG_EF # Calculate emissions
)
total_emissions <- emissions %>%
group_by(Year, Country) %>%
summarise(Total_GHG_Emissions = sum(GHG_Emissions))
### Plot
p_GHG_emissions <- ggplot(total_emissions, aes(x = Year, y = Total_GHG_Emissions, fill = Country)) +
geom_point(aes(color=Country)) +
geom_line(aes(color=Country))+
theme_bw() +
ylab("GHG Emissions")
p_GHG_emissions
cdp_data <- read.csv(file = "../Data/Electricity generation by source - top 5.csv", stringsAsFactors = TRUE)
# Change column name to avoid dots
cdp_data <- rename(cdp_data, ElectricityGeneration_GWh = Electricity.Generation..GWh.) %>% na.omit()
View(cdp_data)
View(cdp_data)
total_electricity <- cdp_data  %>%
group_by(Year, Country) %>%
summarise(ElectricityGeneration_GWh = sum(ElectricityGeneration_GWh))
View(percent_FF)
View(percent_FF)
knitr::opts_chunk$set(echo = TRUE)
setwd("~/Documents/CDP_Task/Code/") # set working directory
rm(list=ls(all=TRUE))
graphics.off()
require(ggplot2)
require(dplyr)
knitr::opts_chunk$set(echo = TRUE)
setwd("~/Documents/CDP_Task/Code/") # set working directory
rm(list=ls(all=TRUE))
graphics.off()
require(ggplot2)
require(dplyr)
cdp_data <- read.csv(file = "../Data/Electricity generation by source - top 5.csv", stringsAsFactors = TRUE)
head(cdp_data) # View first few rows
str(cdp_data) # View data structure
names(which(colSums(is.na(cdp_data))>0)) # List columns containing NAs
head(cdp_data[rowSums(is.na(cdp_data)) > 0, ]) # List first rows that contain NAs
total_electricity <- cdp_data  %>%
group_by(Year, Country) %>%
summarise(ElectricityGeneration_GWh = sum(ElectricityGeneration_GWh))
View(cdp_data)
View(cdp_data)
# Change column name to avoid dots and remove NAs
cdp_data <- rename(cdp_data, ElectricityGeneration_GWh = Electricity.Generation..GWh.) %>% na.omit()
rm(list=ls(all=TRUE))
graphics.off()
require(ggplot2)
require(dplyr)
knitr::opts_chunk$set(echo = TRUE)
setwd("~/Documents/CDP_Task/Code/") # set working directory
rm(list=ls(all=TRUE))
graphics.off()
require(ggplot2)
require(dplyr)
This report documents the approach used to explore the electricity generation by source for the top 5 power generating countries over time.
The dataset was first inspected and assessed for quality and then each analysis question was addressed.
### Inspecting the Data
Load the data using the appropriate file path.
```{r}
cdp_data <- read.csv(file = "../Data/Electricity generation by source - top 5.csv", stringsAsFactors = TRUE)
cdp_data <- read.csv(file = "../Data/Electricity generation by source - top 5.csv", stringsAsFactors = TRUE)
```{r}
The electricity generation data contains missing values (NAs). For the purpose of this exercise, the assumption has been made that the  missing values are due to a country not generating electricity by a particular source for that year. Following this assumption, all rows containing missing electricity generation data have been omitted from analysis.
```{r}
names(which(colSums(is.na(cdp_data))>0)) # List columns containing NAs
head(cdp_data[rowSums(is.na(cdp_data)) > 0, ]) # List first rows that contain NAs
# Change column name to avoid dots and remove NAs
cdp_data <- rename(cdp_data, ElectricityGeneration_GWh = Electricity.Generation..GWh.) %>% na.omit()
View(cdp_data)
View(cdp_data)
total_electricity <- cdp_data  %>%
group_by(Year, Country) %>%
summarise(ElectricityGeneration_GWh = sum(ElectricityGeneration_GWh))
View(total_electricity)
View(total_electricity)
country_total_electricity <- filter(total_electricity, Country=='World') # ignore world values
#Plots for countries
p_country_totals <- ggplot(country_total_electricity, aes(x = Year, y = ElectricityGeneration_GWh, fill = Country)) +
geom_point(aes(color=Country)) +
geom_line(aes(color=Country))+
theme_bw() +
#theme(legend.position="bottom") +
ylab("Total Electricity Generation [GWh]")
p_country_totals
country_total_electricity <- filter(total_electricity, Country!='World') # ignore world values
#Plots for countries
p_country_totals <- ggplot(country_total_electricity, aes(x = Year, y = ElectricityGeneration_GWh, fill = Country)) +
geom_point(aes(color=Country)) +
geom_line(aes(color=Country))+
theme_bw() +
#theme(legend.position="bottom") +
ylab("Total Electricity Generation [GWh]")
p_country_totals
# Choose country to explore
country <- "China"
country_data <- filter(cdp_data, Country == country)
p_sources <- ggplot(country_data, aes(x = Year, y = ElectricityGeneration_GWh, fill = Source)) +
geom_point(aes(color=Source)) +
geom_line(aes(color=Source))+
theme_bw() +
ylab("Electricity Generation [GWh]")
p_sources
FF_electricityyy <- filter(cdp_data, Source = c("Coal", "Natural gas", "Oil"))
FF_electricityyy <- filter(cdp_data, Source == c("Coal", "Natural gas", "Oil"))
View(FF_electricityyy)
View(FF_electricityyy)
FF_electricityyy <- filter(cdp_data, Source == c("Coal", "Natural gas", "Oil")) %>%
group_by(Year, Country) %>%
summarise(ElectricityGeneration_GWh = sum(ElectricityGeneration_GWh))
View(FF_electricityyy)
View(FF_electricityyy)
FF_electricity <- filter(cdp_data, Source == c("Coal", "Natural gas", "Oil")) %>%
group_by(Year, Country) %>%
summarise(FossilFuel_ElectricityGeneration_GWh = sum(ElectricityGeneration_GWh))
total_electricity <- cdp_data  %>%
group_by(Year, Country) %>%
summarise(Total_ElectricityGeneration_GWh = sum(ElectricityGeneration_GWh))
total_electricity <- cdp_data  %>%
group_by(Year, Country) %>%
summarise(Total_ElectricityGeneration_GWh = sum(ElectricityGeneration_GWh))
#Plots for countries
p_country_totals <- ggplot(filter(total_electricity, Country!='World'), aes(x = Year, y = Total_ElectricityGeneration_GWh, fill = Country)) +
geom_point(aes(color=Country)) +
geom_line(aes(color=Country))+
theme_bw() +
#theme(legend.position="bottom") +
ylab("Total Electricity Generation [GWh]")
p_country_totals
FF_Total_electricity <- full_join(FF_electricity, total_electricity, by = c(Year, Country))
FF_Total_electricity <- full_join(FF_electricity, total_electricity, by = c('Year', 'Country'))
View(FF_Total_electricity)
View(FF_Total_electricity)
FF_electricity <- filter(cdp_data, Source == c("Coal", "Natural gas", "Oil")) %>%
group_by(Year, Country) %>%
summarise(FossilFuel_ElectricityGeneration_GWh = sum(ElectricityGeneration_GWh))
FF_Total_electricity <- full_join(FF_electricity, total_electricity, by = c('Year', 'Country')) %>%
mutate(
percent_ff = FossilFuel_ElectricityGeneration_GWh / Total_ElectricityGeneration_GWh
)
View(total_electricity)
View(total_electricity)
FF_electricity <- filter(cdp_data, Source == c("Coal", "Natural gas", "Oil")) %>%
group_by(Year, Country) %>%
summarise(FossilFuel_ElectricityGeneration_GWh = sum(ElectricityGeneration_GWh))
FF_Total_electricity <- full_join(FF_electricity, total_electricity, by = c('Year', 'Country')) %>%
mutate(
Percent_FF = FossilFuel_ElectricityGeneration_GWh / Total_ElectricityGeneration_GWh
)
FF_electricity <- filter(cdp_data, Source == c("Coal", "Natural gas", "Oil")) %>% # filter by fossil fuel
group_by(Year, Country) %>%
summarise(FossilFuel_ElectricityGeneration_GWh = sum(ElectricityGeneration_GWh)) # sum generation values from all sources
FF_Total_electricity <- full_join(FF_electricity, total_electricity, by = c('Year', 'Country')) %>% # join total generation with fossil fuel generation
mutate(
Percent_FF = FossilFuel_ElectricityGeneration_GWh / Total_ElectricityGeneration_GWh # calculate percentage
)
p_FF_percent <- ggplot(FF_Total_electricity, aes(x = Year, y = Percent_FF, fill = Country)) +
geom_point(color=Country) +
geom_line(color=Country)+
theme_bw() +
ylab("Proportion of electricity generated by fossil fuels")
View(FF_Total_electricity)
View(FF_Total_electricity)
p_FF_percent <- ggplot(FF_Total_electricity, aes(x = Year, y = Percent_FF)) +
geom_point() +
geom_line()+
theme_bw() +
ylab("Proportion of electricity generated by fossil fuels")
p_FF_percent
colnames(FF_Total_electricity)
p_FF_percent <- ggplot(FF_Total_electricity, aes(x = Year, y = Percent_FF, fill=Country)) +
geom_point() +
geom_line()+
theme_bw() +
ylab("Proportion of electricity generated by fossil fuels")
p_FF_percent
p_FF_percent <- ggplot(FF_Total_electricity, aes(x = Year, y = Percent_FF, fill=Country)) +
geom_point(color=Country) +
geom_line(color=Country)+
theme_bw() +
ylab("Proportion of electricity generated by fossil fuels")
p_FF_percent
p_FF_percent <- ggplot(FF_Total_electricity, aes(x = Year, y = Percent_FF, fill=Country)) +
geom_point(color=Country) +
geom_line(color=Country)+
theme_bw() +
ylab("Proportion of electricity generated by fossil fuels")
p_FF_percent
knitr::opts_chunk$set(echo = TRUE)
setwd("~/Documents/CDP_Task/Code/") # set working directory
rm(list=ls(all=TRUE))
graphics.off()
require(ggplot2)
require(dplyr)
knitr::opts_chunk$set(echo = TRUE)
setwd("~/Documents/CDP_Task/Code/") # set working directory
rm(list=ls(all=TRUE))
graphics.off()
require(ggplot2)
require(dplyr)
This report documents the approach used to explore the electricity generation by source for the top 5 power generating countries over time.
The dataset was first inspected and assessed for quality and then each analysis question was addressed.
### Inspecting the Data
Load the data using the appropriate file path.
```{r}
cdp_data <- read.csv(file = "../Data/Electricity generation by source - top 5.csv", stringsAsFactors = TRUE)
cdp_data <- read.csv(file = "../Data/Electricity generation by source - top 5.csv", stringsAsFactors = TRUE)
```{r}
The electricity generation data contains missing values (NAs). For the purpose of this exercise, the assumption has been made that the  missing values are due to a country not generating electricity by a particular source for that year. Following this assumption, all rows containing missing electricity generation data have been omitted from analysis.
```{r}
names(which(colSums(is.na(cdp_data))>0)) # List columns containing NAs
head(cdp_data[rowSums(is.na(cdp_data)) > 0, ]) # List first rows that contain NAs
# Change column name to avoid dots and remove NAs
cdp_data <- rename(cdp_data, ElectricityGeneration_GWh = Electricity.Generation..GWh.) %>% na.omit()
###### FIND WAY TO REPESENT THIS AS GRAPH NOT JUST AS A TABLE.  REPORT NUMBER OF NA rows
### Question 1: Total Electricity Generation
*Calculate the total electricity generation per year. How does this change overtime?*
To find the total electricity generated by each country per year, the amount of generation from each source is summed.
```{r}
total_electricity <- cdp_data  %>%
group_by(Year, Country) %>%
summarise(Total_ElectricityGeneration_GWh = sum(ElectricityGeneration_GWh))
total_electricity <- cdp_data  %>%
group_by(Year, Country) %>%
summarise(Total_ElectricityGeneration_GWh = sum(ElectricityGeneration_GWh))
```{r}
From the figure, China showed the most dramatic change in their electricity generation, with an increasing rate of generation. I have selected China as my country of choice for further investigation.
**DO FURTHER ANALYSIS HERE -- % change since 1990? see what type of growth?  HOW DOES THIS CHANGE OVER TIME**
```{r, echo=FALSE}
#Plots for countries
p_country_totals <- ggplot(filter(total_electricity, Country!='World'), aes(x = Year, y = Total_ElectricityGeneration_GWh, fill = Country)) +
geom_point(aes(color=Country)) +
geom_line(aes(color=Country))+
theme_bw() +
#theme(legend.position="bottom") +
ylab("Total Electricity Generation [GWh]")
p_country_totals
p_country_totals
### Question 2: Fossil Fuel Generation
*What percentage of electricity is generated from fossil fuel sources per year?*
First the original data is subset by the country of interest (in this analysis China has been selected).
```{r}
# Choose country to explore
country <- "China"
country_data <- filter(cdp_data, Country == country)
```
The amount of electricity generation by different sources in China over time can be seen in the figure below. The majority of electricity is generated by coal in China followed by natural gas, the other sources of electricity represent a small proportion of overall generation.
```{r, echo=FALSE}
p_sources <- ggplot(country_data, aes(x = Year, y = ElectricityGeneration_GWh, fill = Source)) +
geom_point(aes(color=Source)) +
geom_line(aes(color=Source))+
theme_bw() +
ylab("Electricity Generation [GWh]")
p_sources
p_sources
To explore how the amount of electricity generated by fossil fuels have changed over time, a the proportion of electricity generated by fossil fuels (oil, coal and natural gas) with respect to total electricity generation is found.
First the combined amount of electricity generated by fossil fuels per year is found.
```{r}
FF_electricity <- filter(cdp_data, Source == c("Coal", "Natural gas", "Oil")) %>% # filter by fossil fuel
group_by(Year, Country) %>%
summarise(FossilFuel_ElectricityGeneration_GWh = sum(ElectricityGeneration_GWh)) # sum generation values from all sources
FF_Total_electricity <- full_join(FF_electricity, total_electricity, by = c('Year', 'Country')) %>% # join total generation with fossil fuel generation
mutate(
Percent_FF = FossilFuel_ElectricityGeneration_GWh / Total_ElectricityGeneration_GWh # calculate percentage
)
FF_Total_electricity <- full_join(FF_electricity, total_electricity, by = c('Year', 'Country')) %>% # join total generation with fossil fuel generation
mutate(
Percent_FF = FossilFuel_ElectricityGeneration_GWh / Total_ElectricityGeneration_GWh # calculate percentage
)
Then the amount of fossil fuel electricity generation is found as a percentage of total generation and is recorded in a new dataframe.
The percentage of electricity generated by fossil fuels in China can be seen in the figure below.  From about 2000, the proportion of China's electricity that is generated by fossil fuels has been steadily declining.  However, despite these reductions, China is still producing the majority of its electricity by fossil fuels.
```{r, echo=FALSE}
p_FF_percent <- ggplot(FF_Total_electricity, aes(x = Year, y = Percent_FF, fill=Country)) +
geom_point(color=Country) +
geom_line(color=Country)+
theme_bw() +
ylab("Proportion of electricity generated by fossil fuels")
p_FF_percent
View(FF_Total_electricity)
View(FF_Total_electricity)
